<section class="page-header">
  <div>
    <h1>{{ 'platform.modules.title' | translate }}</h1>
    <p>{{ 'platform.modules.subtitle' | translate }}</p>
  </div>
  <button pButton icon="pi pi-plus" (click)="openCreate()">
    {{ 'platform.modules.new' | translate }}
  </button>
</section>

<p-table [value]="modules" [loading]="loading" styleClass="p-datatable-gridlines full-width-table" responsiveLayout="scroll">
  <ng-template pTemplate="header">
    <tr>
      <th>{{ 'platform.modules.name' | translate }}</th>
      <th>{{ 'platform.modules.slug' | translate }}</th>
      <th>{{ 'platform.modules.launchUrl' | translate }}</th>
      <th>{{ 'platform.modules.status' | translate }}</th>
      <th>{{ 'platform.modules.action' | translate }}</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-module>
    <tr>
      <td>
        <strong>{{ module.name }}</strong>
      </td>
      <td>{{ module.slug }}</td>
      <td>{{ module.launchUrl || module.baseUrl || ('platform.modules.emptyUrl' | translate) }}</td>
      <td><p-tag [value]="module.status" severity="info"></p-tag></td>
      <td class="actions">
        <button pButton class="p-button-text" icon="pi pi-pencil" (click)="openEdit(module)"></button>
        <button pButton class="p-button-text" icon="pi pi-trash" (click)="remove(module)"></button>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog [(visible)]="dialogOpen" [modal]="true" [style]="{ width: '420px' }">
  <ng-template pTemplate="header">
    <strong>{{ editing ? ('platform.modules.edit' | translate) : ('platform.modules.new' | translate) }}</strong>
  </ng-template>

  <form [formGroup]="form" class="dialog-form">
    <label>
      {{ 'platform.modules.name' | translate }}
      <input pInputText formControlName="name" />
    </label>
    <label>
      {{ 'platform.modules.slug' | translate }}
      <input pInputText formControlName="slug" />
    </label>
    <label>
      {{ 'platform.modules.launchUrl' | translate }}
      <input pInputText formControlName="launchUrl" />
    </label>
    <label>
      {{ 'platform.modules.status' | translate }}
      <p-select [options]="statusOptions" formControlName="status"></p-select>
    </label>
    <label>
      {{ 'platform.modules.icon' | translate }}
      <input pInputText formControlName="icon" />
    </label>
  </form>

  <ng-template pTemplate="footer">
    <button pButton class="p-button-text" (click)="dialogOpen = false">
      {{ 'common.cancel' | translate }}
    </button>
    <button pButton (click)="save()">
      {{ 'common.save' | translate }}
    </button>
  </ng-template>
</p-dialog>
